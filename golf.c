#define c(a,x) *p==a?x:
#define o(a,r) c(a, (*--s = *s r *(s+1), d))
t[2000];
main(d) {
    char q[2001],*p=q,*s=t;
    for (gets(p);;)
        p+=d=
        c(46, (printf("%d\n", *s--),d))
        c(118, 80)
        c(94, -80)
        c(62, 1)
        c(60, -1)
        c(124, *s-- ? -80 : 80)
        c(95, *s-- ? -1 : 1)
        o(43, +)
        o(45, -)
        o(47, /)
        o(42, *)
        c(32, d)
        c(64, p = 0)
        (*++s = *p - '0', d);
}
